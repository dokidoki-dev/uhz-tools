<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>链接整合平台</title>
    <link rel="stylesheet" href="../static/css/layui.css">
    <script src="../static/jquery-3.0.0.min.js"></script>
</head>
<style>
    .div_center {
        text-align: center
    }
</style>
<body>

<div class="layui-container">
    <div class="layui-progress" style="margin: 15px 0 30px;">
        <div class="layui-progress-bar" lay-percent="100%"></div>
    </div>

    <div class="div_center">
        <h3 style="color: #01AAED">信息传递功能</h3>
    </div>

    <blockquote class="layui-elem-quote" style="margin-top: 30px;">
        <span>文字传递功能：(点击按钮即可复制)</span>
    </blockquote>
    <table class="layui-table">
        <thead>
        <tr>
            <th>消息</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>
                <input type="text" title="{{ context.msg }}" id="btn_copy" style="border:none;outline:medium;background:transparent;width:100%;height:100%" class="layui-table-cell" readonly="readonly" value="{{ context.msg }}">
            </td>
        </tr>
        </tbody>
    </table>
    <button class="layui-btn layui-btn-xs layui-btn layui-btn-normal" style="float: right" test-active="Copy">
        点击复制
    </button>
    <br/>
    <blockquote class="layui-elem-quote" style="margin-top: 30px;">
        <span>文件下载：(点击下载即可)</span>
    </blockquote>
    <table class="layui-table">
        <thead>
        <tr>
            <th>文件名称</th>
            <th>操作</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>
                <input type="text" style="border:none;background:transparent;width:100%;height:100%" class="layui-table-cell" readonly="readonly" value="{{ context.filename }}">
            </td>
            <td>
                <a href="/downloads/{{ context.user }}" target="_blank"
                   class="layui-btn-xs layui-btn layui-btn-primary layui-border-blue">点击下载文件</a>
            </td>
        </tr>
        </tbody>
    </table>
</div>


<!-- 引入 layui.js 的 <script> 标签最好放置在 html 末尾 -->
<script src="../static/layui.js"></script>
<script>
    layui.use(function () {
        var layer = layui.layer
            , util = layui.util;
        //触发事件
        util.event('test-active', {
            "Copy": function () {
                var e = document.getElementById("btn_copy");//对象是content
                if (e.value !== "") {
                    e.select();//选择对象
                    document.execCommand("Copy");//执行浏览器复制命令
                    layer.alert("复制成功！", {
                        icon: 6,
                        title: "成功"
                    });
                } else {
                    layer.alert("文本框不能为空！", {
                        icon: 5,
                        title: "失败"
                    });
                }
            },
        });
    });
</script>
</body>
</html>
